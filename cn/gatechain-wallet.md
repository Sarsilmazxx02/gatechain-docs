# 钱包 wallet

>  本文档涉及的版本为正式版，新功能开发工作在持续进行。
>  桌面版钱包可以自由配置连接MainNet、TestNet、DevNet，以及任何用户自己搭建的网络。TestNet和DevNet中的测试币可能在重置中清空，再次获取新的测试币即可。

GateChain生态针对个人、专业用户和企业用户的差异化需求，提供了类型丰富的钱包应用。

* 在测试网阶段，GateChain提供基于Windows、Mac OS平台的桌面版钱包。专业用户也可以通过RPC方式访问和测试。

* 在主网阶段，GateChain将提供多种针对个人、专业用户和企业用户的钱包应用。包括：命令行钱包、基于Android和iOS的手机版钱包、Web钱包、多签钱包、硬件钱包等。

## 2. 规范说明
### 2.1 GateChain地址类型 ###

GateChain的账户分普通账户（Normal Account）和保险账户（Vault Account）两类。不同账户类型，对应于不同的地址前缀标识：

* 普通账户（Normal Account）：以“gt”作为前缀标识。其中，“gt1”表示普通单签账户，“gt2”表示普通多签账户。
* 保险账户（Vault Account）：以“vault”作为前缀标识。其中，“vault1”表示保险单签账户，“vault2”表示保险多签账户。

使用GateChain定义的地址前缀标识机制，收款账户易于识别付款账户的类型。由此，对于保险账户发送的付款交易，用户可注意到并根据自身需求确认收款，在可撤回时间之后安全确认。

### 2.2 GateChain交易类型 ###

GateChain具有多种转账交易类型。为便于用户有效识别不同的转账类型，GateChain创新地提出了转账交易类型标识。

下面列出不同转账类型的前缀标识：

* 不可撤回交易支付（Irrevocable Pay）：“IRREVOCABLEPAY-”
* 可撤回交易支付（Revocable Pay）：“REVOCABLEPAY-”
* 修改账户属性（Account Set）： “ACCOUNTSET-”
* 创建保险账户（Vault Create）：“VAULTCREATE-”
* 撤回交易（Revoke）: “REVOKE-”
* 清算保险账户（Vault Clear）：“VAULTCLEAR-”
* 其他未命名交易类型（Untitled）： “BASIC-”

### 2.3 其他定义 ###
* 找回账户：保险账户的预设安全关联账户，当保险账户的转账操作被撤回后，资金将被转移到这一账户。

* 可撤回时间：是在可撤回交易执行后允许进行交易撤回操作的有效时间，也就是在当前交易发出后，系统出块数量达到预设值之前可以进行交易撤回操作。

* 清算块高：是未来的某个时间，也就是未来这个区块链高度的时间，到达这个清算高度以后，账户中的资金将允许被清算。

>在GateChain中所有时间设定均使用区块高度计算，目前系统出块速度约为1秒，设置上述时间请据此作为参考。

## 3. 下载安装

- 进入GateChain的官网[www.gatechain.io](https://www.gatechain.io) ，点击上方的“钱包下载”，下载系统对应的版本。<br/>![](./images/0.png)</br>
	
- 也可以直接访问[https://www.gatechain.io/wallets](https://www.gatechain.io/wallets) ，下载PC版钱包。
  	
	>目前支持Windows 和 Mac OS 系统。
  
  	

## 4. 快速使用

### 4.1 密码和安全
- GateChain提供得钱包是本地钱包，所以不需要注册登陆账户，但在首次运行时，需要设置登陆密码，此密码除用于登录本地钱包以外也作为进行钱包各项操作时的“解锁密码”，十分重要！如果丢失可能会造成您的财产损失，所以请尽量设置较为复杂的密码，并妥善保管。<br/>![](./images/open.png)</br>

- 由于GateChain独创的可撤回交易，为了防止这一安全措施被滥用，GateChain使用了醒目的交易头标识。用户在接收到一笔交易时，可以通过以下特征来判断交易是否可撤回，进行识别后再进行收款确认等后继操作。
> 1. 普通账户以“gt”作为前缀，使用“gt”前缀的地址作为转账来源的交易是不可撤回的。
> 2. 不可撤回的转账交易id前缀是 IRREVOCABLEPAY- ，这种前缀的转账交易是不可撤回的。
> 3. 保险账户以“vault”作为前缀，使用“vault”前缀的地址作为转账来源的交易是可以被撤回的。
> 4. 可撤回的转账交易id前缀是 REVOCABLEPAY- ，这种前缀的转账交易是可撤回的。

### 4.2 创建普通账户
- 1 ）点击主界面“创建账户”，选择“单签账户 ”-->>“普通账户。

![](./images/1.png)

- 2 ）输入账户名称，点击“创建”。

![](./images/2.png)

- 3 ）输入解锁密码，点击“确认”。

![](./images/3.png)

- 4 ）账户创建成功，注意识别单签普通账户，普通账户地址以“gt”作为前缀。

![](./images/4.png)

### 4.3 账户导入

除了创建账户以外，也可以使用“导入账户”功能来导入一个之前已经创建的账户，具体操作步骤如下：

- 1 ) 点击主界面“导入账户”，选择单签账户。 <br/>![](./images/account9.png)</br>

- 2 ）进入账户导入界面，依次填写账户名称（不必与原账户名相同），账户备份文件（Keystore文件）以及Keystore文件的解密密码（导出账户文件时输入的密码），点击“导入”按钮。
 <br/>![](./images/account10.png)</br>
- 3 ）输入当前解锁密码，点击“确认”按钮，完成账户导入。

### 4.4 获得测试币 
- **通过钱包获得测试币：** 
	- 钱包账户概览界面有 “获得测试币 (Give me GT) 图标”，点击后会自动向测试链提交申请拨发测试币，几分钟后测试币就显示在钱包余额里面了。<br/>![](./images/5.png)</br>

- **通过网站获得测试币：** 
	- 访问网站： https://explorer.gatechain.io/faucet
	- 输入要获取测试币的账户地址，点击添加申请，几分钟后测试币就显示在钱包余额里面了。<br/>![](./images/6.png)</br>

> 每个账户在24小时内只能申请一次测试币，每次通过钱包申请测试币将获得以下提示。
> <br/>![](./images/5-1.png)</br>

### 4.5 创建保险账户
- 1 ）点击主界面“创建账户”，选择“单签账户 ”-->>“保险账户

![](./images/7.png)

- 2 ）输入账户名称，点击“创建”
 
![](./images/8.png)

- 3 ）输入解锁密码解锁，点击“确认”

![](./images/9.png)

- 4 ）账户创建成功，提示需要激活，点击“激活”按钮

![](./images/10.png)

- 5 ）选择手续费付款账户，输入一个自己的备用账户作为“找回账
号”，选择交易可撤回时间（比如 48 小时），清算块高（比如 5 年）,点击“下一步” 
<br/>![](./images/11.png)</br>

- 6 ）确认保险账户激活参数后，点击“确定”，输入解锁密码后激活保险账户。
 
![](./images/13.png)<br/>![](./images/14.png)![](./images/15.png)</br>

> 亦可以通过其他普通账户激活保险账户
> 
> - 进入用于激活保险账户的其他账户概览界面，点击右侧“激活其他账户”
> <br/>![](./images/vault14.png)</br>
> - 进入激活保险账户页面。
> - 激活流程同上。<br/>![](./images/vault15.png)</br>
> 注：当前用于激活保险账户的普通账户地址将被自动填写入“找回账户”栏内。希望使用其他账户作为找回账户的用户请注意修改。

### 4.6 保险账户清算时间可以进行修改
具体步骤如下:

- 1 ）进入需要修改清算时间的保险账户，点击“清算块高”右侧修改按钮。<br/>![](./images/vault10.png)</br>
- 2 ）进入修改页面，设置新的清算块高。<br/>![](./images/vault11.png)</br>
- 3 ）核对信息并输入解锁密码<br/>![](./images/vault12.png)</br>
- 4 ）修改交易发起成功。 <br/>![](./images/vault13.png)</br>


### 4.7 设置保险账户告警通知

GateChain为保险账户提供了邮件和短信两种告警通知方式。

- 1 ）进入区块链浏览器监控页面
	- 可以点击保险账户地址右侧图标链接进入账户监控设置页面。<br/>![](./images/monitor1.png)</br>
	- 或者直接访问[测试网区块浏览器](https://explorer.gatechain.io/testnet/monitor) 点击“监控”进入账户监控设置页面。 <br/>![](./images/monitor0.png)</br>
- 2 ) 填写需要监控的账户地址以及用于接收预警信息的手机、邮箱信息。
 <br/>![](./images/monitor2.png)</br>
  
### 4.8 使用普通账户转账（不可撤回）
- 1 ）从钱包账户列表中选择需要进行转出操作的账户，点击进入账户概要。<br/>![](./images/18.png)</br>

- 2 ) 选择“转账”按钮。<br/>![](./images/19.png)</br>

- 3 ) 进入转账页面，填写接收账户地址以及需要转账金额，确认后点击“发送”按钮。
<br/>![](./images/20.png)</br>

- 4 ) 对转账信息进行核对后点击“确认” 按钮
<br/>![](./images/21.png)</br>

- 5 ) 输入解锁密码，并点击“确认” 
- 6 ) 获取交易发起成功反馈
<br/>![](./images/22.png)</br>

**注意：** 
> 1. 普通账户以“gt”作为前缀，使用“gt”前缀的地址作为转账来源的交易是不可撤回的。
> 2. 不可撤回的转账交易id前缀是 IRREVOCABLEPAY- ，这种前缀的转账交易是不可撤回的。
>
> **此类转账交易是即时生效并且不可撤回的，收到交易后可以放心确认和使用**


- 7 ) 在账户概览“转账记录”中查询本账户的转账记录

![](./images/23.png)

### 4.9 使用保险账户转账（可撤回）

保险交易转账都是延时生效的转账交易，因此在使用保险账户进行转账时相较于普通转账需要填写额外内容。具体步骤如下：

- 1 ）使用保险账户发起对外转账（ Send Revocable Payment from Vault Account)<br/>![](./images/vault1.png)</br>

- 2 ）填写接收账户地址，转出金额等信息，点击“发送”按钮
<br/>![](./images/vault2.png)</br>

- 3 ）确认转账信息，点击“确认” 按钮
<br/>![](./images/vault3.png)</br>

- 4 ）输入钱包登陆密码后即可获得“可撤回交易发起成功的通知
<br/>![](./images/vault4.png)</br>
	
> 收款账户在收款记录中可以看到该笔交易，点击具体交易获取交易详细信息（交易状态，预计确认时间，金额等）
> <br/>![](./images/vault4-1.png)![](./images/vault4-2.png)</br>

- 5 ）如已经对相关账户设置过接收预警消息，在转账后将立即获得告警通知 (Receive alarm of vault account out going payment)


- 6 ）发起撤回交易将资金撤回 (Revoke the undesired vault account payment)，在账户概览页面点击转账记录，查询可撤回转账交易记录，点击右侧“撤回交易”按钮。
<br/>![](./images/vault5.png)</br>
- 7 ）确认待撤回交易信息后点击“下一步”
<br/>![](./images/vault6.png)</br>
- 8 ）再次确认撤回交易细节，并输入钱包登陆密码
<br/>![](./images/vault7.png)</br>
- 9 ）撤回交易发起成功
<br/>![](./images/vault8.png)</br>
- 10 ）本次撤回交易转入对应找回账户中
<br/>![](./images/vault9.png)</br>

**注意:** 
> 1. 保险账户以“vault”作为前缀，使用“vault”前缀的地址作为转账来源的交易是可以被撤回的。
> 2. 可撤回的转账交易id前缀是 REVOCABLEPAY- ，这种前缀的转账交易是可撤回的。
> 
> **此类转账只有在超过可撤回期限后还未被撤回的情况下才算成功接收。**

### 4.10 委托代币
GateChain的用户有两种方式参与POS挖矿：

1、搭建GateChain全节点，成为共识账户。

2、委托GT给其他共识账户。

钱包提供第二种委托给其他共识账户，来获得挖矿收益，具体操作步骤如下：

- 1 ）进入账户主页，点击“委托”按钮。
<br/>![](./images/24.png)</br>

- 2 ）委托页面，在页面右上角点击“发起委托”按钮。
<br/>![](./images/25.png)</br>

- 3 ）填写要委托的共识账户、委托金额，或者可以在委托账户处点击“查看所有共识账户”按钮，跳转到浏览器选择需要委托的共识账户。
<br/>![](./images/26.png)![](./images/27.png)</br>

- 4 ）确认委托信息，点击“确认”按钮。
<br/>![](./images/28.png)</br>

- 5 ）回到委托页面，在我的委托列表显示委托记录。
<br/>![](./images/29.png)</br>

- 6 ）委托页面，在我的委托列表右侧有“再次委托”按钮，可对此共识账户再次委托。
<br/>![](./images/30.png)</br>

- 7 ）委托页面，在我的委托列表右侧有“转移委托”按钮。
<br/>![](./images/31.png)</br>

- 8 ）点击“转移委托”按钮后，填写需要转移到共识账户地址、转移代币数量。
<br/>![](./images/32.png)</br>

- 9 ）确认转移委托信息，点击“确认”按钮
<br/>![](./images/33.png)</br>

- 10 ）回到委托页面，在我的委托列表显示转移委托记录。
<br/>![](./images/34.png)</br>

- 11 ）委托页面，在我的委托列表右侧有“解除委托”按钮。
<br/>![](./images/35.png)</br>

- 12 ）点击“解除委托”按钮后，填写需要解绑的代币数量。
<br/>![](./images/36.png)</br>

- 13 ）确认解除委托信息，点击“确认”按钮。
<br/>![](./images/37.png)</br>

- 14 ）回到委托页面，在我的委托列表显示“解除委托中的代币数量”，解除委托锁定时间为21天。
<br/>![](./images/38.png)</br>

- 15 ）委托页面，在我的委托列表右侧有“提取收益”按钮。
<br/>![](./images/39.png)</br>

- 16 ）点击“提取收益”按钮后，点击“发送”按钮，并确认提取收益信息。
<br/>![](./images/40.png)</br>

- 17 ）回到委托页面，在我的委托列表“总收益”显示处，收益清零，提取的收益直接进入账户余额。
<br/>![](./images/41.png)</br>

- 18 ）委托页面有委托历史列表，里面显示具体的委托、转移委托、解除委托、提取收益的交易信息。
<br/>![](./images/42.png)</br>

---
## 5. 进阶功能
>本部分内容涉及账户操作，请谨慎使用，避免因误操作造成资产损失。

钱包支持对本地钱包账户列表中的账户进行包括账户导出、账户删除和查看账户私钥在内的各项操作。

- 选择需要进行操作的账户，点击进入账户概览。<br/>![](./images/account1.png)</br>

- 点击右上角，进入账户详情。<br/>![](./images/account2.png)</br>

- 查看账户详情<br/>![](./images/account3.png)</br>

> 普通账户只显示“账户信息”，保险账户将额外显示相关的“保险设置”信息。

### 5.1 账户导出
- 单签账户导出
	- 单签账户可以导出到文件进行备份，进入账户详情。
	- 点击“Keystore”右侧“下载”按钮，输入解锁密码后进行账户备份。
<br/>![](./images/account4.png)</br>

### 5.2 查看私钥
- 进入账户详情后点击“私钥”右侧“查看”按钮，输入解锁密码后查看账户私钥。
<br/>![](./images/account5.png)![](./images/account6.png)</br>

>所显示私钥请不要使用截图，复制等方式保存在可联网电脑中，以避免资产风险。

### 5.3 删除账户
- 进入账户详情后点击右上方“删除账户”按钮
<br/>![](./images/account7.png)</br>

- 输入解锁密码后点击“确认”按钮，相关账户即被删除。
<br/>![](./images/account8.png)</br>

### 5.4 多签账户
#### 5.4.1 创建多签账户
* 1 ）点击主界面“创建账户”，选择“多签账户 ”-->>“普通账户。<br/>![](./images/multi0.png)</br>

* 2 ）依次填写“账户名称”，选择“团队总人数”(2-7人数可选)，“最小签名数”以及“成员公钥”（可以使用钱包内已创建的账户公钥或填写其他非本地公钥），点击“下一步”。<br/>![](./images/multi2.png)</br>
* 3 ）进入确认页面，点击“创建”按钮，完成多签账户创建。<br/>![](./images/multi3.png)</br>
* 4 ) 按照提示将多签账户发布到链上。<br/>![](./images/multi4.png)</br>
* 5 ）发布公钥需要产生手续费，选择付款账户，并点击下一步。<br/>![](./images/multi5.png)</br>
* 6 ）确认信息后，输入解锁密码，获得交易发起成功反馈。<br/>![](./images/multi6.png)</br>

> 保险多签账户创建流程与普通多签账户一致，激活过程与普通保险账户激活过程一致

#### 5.4.2 导出多签账户
* 1 ）在账户列表选择需要导出的多签账户，进入账户详情。<br/>![](./images/multi7.png)</br>	
* 2 ) 选择“导出多签账户”按钮，输入解锁密码后生产多签账户文件。<br/>![](./images/multi8.png)</br>

#### 5.4.3 多签转账交易

* 发起多签账户转账交易首先和普通交易类似，填写收款账户、金额等数据，点击“发送”。 <br/>![](./images/multi9-1.png)</br>
* 对交易信息进行确认后，进入“签名&广播流程”页面。<br/>![](./images/multi9-2.png)</br>
* 因不同多签账户的参与成员数量的不同，请按照“签名&广播流程”页面给出的提示完成“收集签名”以及“广播交易”操作。

**示例：**
> <br/>![](./images/multi9.png)</br>

---
## 6. 区块浏览器
-  查询账户、交易ID、区块、验证人等信息，请访问测试链区块浏览器[https://explorer.gatechain.io/](https://explorer.gatechain.io/)。

![](./images/17.png)

## 7. 开发文档
- 更多开发文档：[https://www.gatechain.io/docs](https://www.gatechain.io/docs) 


